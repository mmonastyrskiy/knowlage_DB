Дисклеймер.  
Все инструменты описанные в данной статье реальны, находятся в свободном доступе и используются специалистами по Информационной Безопасности для проведения тестирования на проникновение информационных систем компаний и предприятий. Автор статьи не занимается взломом и не поощряет подобных действий, все описанное ниже было выполнено на специально подготовленной для этого виртуальной машине.

Сегодня мы разберем одну из виртуальных машин сервиса HackTheBox.eu, которая согласно их классификации и отзывам пользователей по сложности 3/10. Как всегда нам известен только её IP и как и всегда в таких случаях начнем атаку со сканирования портов nmapом[[nmap]]. Результат долго себя ждать не заставил

```bash
 Nmap scan report for 10.10.10.191

 Host is up (0.26s latency).

 Not shown: 998 filtered ports

 PORT STATE SERVICE VERSION

 21/tcp closed ftp

80/tcp open http Apache httpd 2.4.41 ((Ubuntu))
 |_http-generator: Blunder

 |_http-server-header: Apache/2.4.41 (Ubuntu)

|_http-title: Blunder | A blunder of interesting facts
```

Мы видим 2 порта, [[FTP]] закрыт, учитывая то, что исходя из результатов сканирования это Linux машина, можно предположить что на ней настроены [[IPTABLES]], к сожалению на этом системы защиты этой тачки заканчиваются XD. также у нас по стандарту есть 80 порт под [[Apache]], сразу запустим [[gobuster]] потому что сканирование займет некоторое время.

В результате мы получаем много крайне полезной инф-ии, узнаем что ник админа **fergus**, а также получаем ссылку на консоль управления CMS, попытаемся найти эксплоит в сети… быстрый поиск ничего не дал.. что же… пойдем посмотрим что мы имеем на самом сайте. Это похоже на обычный портал со статейками… придется читать… при внимательном прочтении можно заметить что в одной из статей 2 слова слились в одно. Быть может это подсказка? Попробуем зайти в CMS. Вышло, мы внутри, узнаем что это [[Blundit]]. Осталось найти способ дропнуть шелл-код на сервер и получить консоль. Немного погуглив версию Bludit со словом «эксплоит» находим уязвимость в загрузке фоток на сервер, можно было самому придумать реализацию, но мне было слишком лень, тем более у меня есть готовый эксплоит, так еще и под [[metasploit]], вообще замечательно. Кто-то начнет плеваться за [[metasploit]], но с другой стороны, зачем нужен инструмент, если его не использовать. Строить из себя крутого хакера, который сам пишет реализацию каждой уязвимости? А зачем? Если мы все знаем что это не так.

Идем использовать найденый сплоит, задаем нужные опции, и БУМ! мы внутри, [[metasploit]] любезно создал нам сессию удаленного доступа [[metasploit#meterpreter]]. Задаемся извечным вопросом «whoami», получаем не менее извечное www-data

Прогуляемся по папкам, найдем и запишем ники других пользователей, немного погуглив про данные пользователей в [[Blundit]], находим нужную папку идем туда и фильтруем.

```bash
 grep -R pass | grep -v .js > passwd.txt
```

и у нас ± чистый вывод, собравшийся в файл, т. к. у нас есть [[metasploit#meterpreter]] скачать его получится без особых костылей, качаем, удаляем с удаленной тачки файл.  
начинаем фильтровать дальше, немного посмотрев содержимое мы найдем пару хешей, теперь или «искусство гуглить» или [[hashcat]], возьмем первое.

Погугив хэши, мы получаем пароль от одного из пользователей, а перебрать нам их никто не мешает, правда?

Получили учетку hugo, этот Хьюго, держит у себя в домашней папке файлик users.txt содержимое которого давно пора сдать на сайте.

> Остался root доступ тут все слишком просто и скучно.

```bash
 sudo -l
```

ответ перед глазами, нам любезно оставили возможность запустить bash под root-ом,

```bash
sudo -1 /bin/bash  
```

И… мы root, этот готов. Несите следующий сервер.

